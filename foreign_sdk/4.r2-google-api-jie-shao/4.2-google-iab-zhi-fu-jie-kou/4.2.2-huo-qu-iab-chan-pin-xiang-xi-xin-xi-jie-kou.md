# 4.2.2 获取IAB产品详细信息接口

**功能说明：**

研发方可以直接调用该接口来获取Google Play 开发者管理后台上配置的支付产品详细信息。在获取的详细信息中，产品的价格（货币单位）将随着当前玩家所处的地区的不同而不同。

注意：

1.玩家网络，设备，Google账号等问题，该接口无法保证100%回调成功，对于回调失败的情况，研发需要使用默认的产品信息；

2.每次最多只能查询20个商品，多余20个商品，该接口会回调错误。

**接口形式：**

```text
public static void getGoogleIabProducts (Context context,
        ArrayList<String> googleProductIDs,
        GoogleIabCallback<HashMap<String,GoogleIabProduct>> callback)
```

**参数说明：**

context : Android Context实例 \(必须\)。

googleProductIDs ：需要查询产品的id 的数据集合（Google Play开发者后台上配置的产品ID）（必须）。

callback :接口回调（必须）。

**接口示例：**

```text
//接口回调实例
GoogleIabCallback<HashMap<String,GoogleIabProduct>> productsCallback =
        new GoogleIabCallback<HashMap<String,GoogleIabProduct>>(){
    @Override
    public void onSuccess(HashMap<String,GoogleIabProduct> result) {
        if(result==null||result.size()<=0){return;}
        StringBuffer sb = new StringBuffer();
        Set<String> productIDs = result.keySet();
        //now parse the details of all products
        for(String pid:productIDs){
            GoogleIabProduct detail = result.get(pid);
            sb.append("--------Product:"+detail.getSku()+"--------\n");
            //the following two items are exactly the same with what you define  
            //them in Google Play Developer console
            sb.append("Product Title:"+detail.getTitle()+"\n");
            sb.append("Product Description:"+detail.getDescription()+"\n");
            //you may be intrested in the following two data items,
            //the returned price/currency code can be different based on users'
            //current google accounts/region networks
            sb.append("Price in string:"+detail.getPrice()+"\n");
            sb.append("Price Currency Code:"+
                    detail.getPriceCurrencyCode()+"\n");              
         }
     }
    @Override
    public void onError(GoogleIabError error) {
        //something went wrong when getting products details
    }
    @Override
    public void onCancel() {
        // never called in this api
    }
};
//接口需要的数据
ArrayList<String> product_ids = new ArrayList<String>();
    String PID1= "lxtest123";
    String PID2= "lxtest124";
    product_ids.add(PID1);
    product_ids.add(PID2);
//接口调用
R2SDK. getGoogleIabProducts (this.getBaseContext(), product_ids,   
        productsCallback);
```

